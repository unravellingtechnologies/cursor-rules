---
description: API design conventions for REST and GraphQL - load when building APIs
alwaysApply: false
---

# REST Conventions

- Resources as nouns: `/users`, `/orders/{id}`. Actions via HTTP methods.
- HTTP methods: GET (read), POST (create), PUT (full replace), PATCH (partial), DELETE.
- Status codes: 200 OK, 201 Created, 204 No Content, 400 Bad Request, 401/403, 404, 500.
- Pagination: cursor-based preferred. Include `next`/`prev` links.
- Filtering: query params (`?status=active&sort=-created`).

# Response Shape

- Envelope: `{ data, meta, error }`. Use `data` for success, `error` for failures. Never both.
- Error codes: machine-readable constants. Messages: human-readable.
- Meta: pagination info (cursor, total).

# Versioning

- URL prefix (`/v1/`) or header (`Accept: application/vnd.api.v1+json`).
- Deprecation: announce in headers, document sunset date, support overlap period.

# GraphQL (if used)

- Schema-first design. Document all types and fields.
- Pagination: Relay-style connections (edges/nodes/pageInfo).
- Mutations return affected object. Errors in `errors` array with extensions.
- N+1: use DataLoader for batching.

# Documentation

- OpenAPI/Swagger for REST. Auto-generate where possible.
- Examples for every endpoint. Document error responses.
